import{useResizeObserver as e}from"./resizeObserver.mjs";import{inject as t,computed as o,ref as l,reactive as a,shallowRef as u,provide as i,useId as n}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{convertToUnit as r,findChildrenWithProvide as s}from"../util/helpers.mjs";import{propsFactory as v}from"../util/propsFactory.mjs";import{getCurrentInstance as m}from"../util/getCurrentInstance.mjs";const d=Symbol.for("vuetify:layout"),y=Symbol.for("vuetify:layout-item"),p=v({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),c=v({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function f(){const e=t(d);if(!e)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:e.getLayoutItem,mainRect:e.mainRect,mainStyles:e.mainStyles}}function g(e){const l=t(d);if(!l)throw new Error("[Vuetify] Could not find injected layout");const a=e.id??`layout-item-${n()}`,r=m("useLayoutItem");i(y,{id:a});const s=u(!1),{layoutItemStyles:v,layoutItemScrimStyles:p}=l.register(r,{...e,active:o((()=>!s.value&&e.active.value)),id:a});return{layoutItemStyles:v,layoutRect:l.layoutRect,layoutItemScrimStyles:p}}function h(n){const v=t(d,null),p=o((()=>v?v.rootZIndex.value-100:1e3)),c=l([]),f=a(new Map),g=a(new Map),h=a(new Map),x=a(new Map),I=a(new Map),{resizeRef:S,contentRect:b}=e(),w=o((()=>{const e=new Map,t=n.overlaps??[];for(const o of t.filter((e=>e.includes(":")))){const[t,l]=o.split(":");if(!c.value.includes(t)||!c.value.includes(l))continue;const a=f.get(t),u=f.get(l),i=g.get(t),n=g.get(l);a&&u&&i&&n&&(e.set(l,{position:a.value,amount:parseInt(i.value,10)}),e.set(t,{position:u.value,amount:-parseInt(n.value,10)}))}return e})),$=o((()=>{const e=[...new Set([...h.values()].map((e=>e.value)))].sort(((e,t)=>e-t)),t=[];for(const o of e){const e=c.value.filter((e=>{var t;return(null==(t=h.get(e))?void 0:t.value)===o}));t.push(...e)}return((e,t,o,l)=>{let a={top:0,left:0,right:0,bottom:0};const u=[{id:"",layer:{...a}}];for(const i of e){const e=t.get(i),n=o.get(i),r=l.get(i);if(!e||!n||!r)continue;const s={...a,[e.value]:parseInt(a[e.value],10)+(r.value?parseInt(n.value,10):0)};u.push({id:i,layer:s}),a=s}return u})(t,f,g,x)})),z=o((()=>!Array.from(I.values()).some((e=>e.value)))),R=o((()=>$.value[$.value.length-1].layer)),j=o((()=>({"--v-layout-left":r(R.value.left),"--v-layout-right":r(R.value.right),"--v-layout-top":r(R.value.top),"--v-layout-bottom":r(R.value.bottom),...z.value?void 0:{transition:"none"}}))),L=o((()=>$.value.slice(1).map(((e,t)=>{let{id:o}=e;const{layer:l}=$.value[t],a=g.get(o),u=f.get(o);return{id:o,...l,size:Number(a.value),position:u.value}})))),M=e=>L.value.find((t=>t.id===e)),C=m("createLayout"),E=u(!1);i(d,{register:(e,t)=>{let{id:l,order:a,position:u,layoutSize:i,elementSize:n,active:r,disableTransitions:v,absolute:m}=t;h.set(l,a),f.set(l,u),g.set(l,i),x.set(l,r),v&&I.set(l,v);const d=s(y,null==C?void 0:C.vnode).indexOf(e);d>-1?c.value.splice(d,0,l):c.value.push(l);const S=o((()=>L.value.findIndex((e=>e.id===l)))),b=o((()=>p.value+2*$.value.length-2*S.value));return{layoutItemStyles:o((()=>{const e="left"===u.value||"right"===u.value,t="right"===u.value,o="bottom"===u.value,a=n.value??i.value,s=0===a?"%":"px",v={[u.value]:0,zIndex:b.value,transform:`translate${e?"X":"Y"}(${(r.value?0:-(0===a?100:a))*(t||o?-1:1)}${s})`,position:m.value||1e3!==p.value?"absolute":"fixed",...z.value?void 0:{transition:"none"}};if(!E.value)return v;const d=L.value[S.value];if(!d)throw new Error(`[Vuetify] Could not find layout item "${l}"`);const y=w.value.get(l);return y&&(d[y.position]+=y.amount),{...v,height:e?`calc(100% - ${d.top}px - ${d.bottom}px)`:n.value?`${n.value}px`:void 0,left:t?void 0:`${d.left}px`,right:t?`${d.right}px`:void 0,top:"bottom"!==u.value?`${d.top}px`:void 0,bottom:"top"!==u.value?`${d.bottom}px`:void 0,width:e?n.value?`${n.value}px`:void 0:`calc(100% - ${d.left}px - ${d.right}px)`}})),layoutItemScrimStyles:o((()=>({zIndex:b.value-1}))),zIndex:b}},unregister:e=>{h.delete(e),f.delete(e),g.delete(e),x.delete(e),I.delete(e),c.value=c.value.filter((t=>t!==e))},mainRect:R,mainStyles:j,getLayoutItem:M,items:L,layoutRect:b,rootZIndex:p});return{layoutClasses:o((()=>["v-layout",{"v-layout--full-height":n.fullHeight}])),layoutStyles:o((()=>({zIndex:v?p.value:void 0,position:v?"relative":void 0,overflow:v?"hidden":void 0}))),getLayoutItem:M,items:L,layoutRect:b,layoutRef:S}}export{y as VuetifyLayoutItemKey,d as VuetifyLayoutKey,h as createLayout,c as makeLayoutItemProps,p as makeLayoutProps,f as useLayout,g as useLayoutItem};
