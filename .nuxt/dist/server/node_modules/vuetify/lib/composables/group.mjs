import{useProxiedModel as e}from"./proxiedModel.mjs";import{reactive as l,computed as t,toRef as n,provide as i,useId as s,inject as o,watch as u,unref as d}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{deepEqual as r,wrapInArray as a,findChildrenWithProvide as c}from"../util/helpers.mjs";import{propsFactory as m}from"../util/propsFactory.mjs";import{getCurrentInstance as f}from"../util/getCurrentInstance.mjs";import{consoleWarn as p}from"../util/console.mjs";const v=m({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),g=m({value:null,disabled:Boolean,selectedClass:String},"group-item");function h(e,l){let d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=f("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const a=s();i(Symbol.for(`${l.description}:id`),a);const c=o(l,null);if(!c){if(!d)return c;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${l.description}`)}const m=n(e,"value"),p=t((()=>!(!c.disabled.value&&!e.disabled)));c.register({id:a,value:m,disabled:p},r);const v=t((()=>c.isSelected(a))),g=t((()=>c.items.value[0].id===a)),h=t((()=>c.items.value[c.items.value.length-1].id===a)),b=t((()=>v.value&&[c.selectedClass.value,e.selectedClass]));return u(v,(e=>{r.emit("group:selected",{value:e})}),{flush:"sync"}),{id:a,isSelected:v,isFirst:g,isLast:h,toggle:()=>c.select(a,!v.value),select:e=>c.select(a,e),selectedClass:b,value:m,disabled:p,group:c}}function b(s,o){const u=l([]),r=e(s,"modelValue",[],(e=>null==e?[]:x(u,a(e))),(e=>{const l=function(e,l){const t=[];return l.forEach((l=>{const n=e.findIndex((e=>e.id===l));if(~n){const l=e[n];t.push(null!=l.value?l.value:n)}})),t}(u,e);return s.multiple?l:l[0]})),m=f("useGroup");function v(e){if(s.multiple&&p('This method is not supported when using "multiple" prop'),r.value.length){const l=r.value[0],t=u.findIndex((e=>e.id===l));let n=(t+e)%u.length,i=u[n];for(;i.disabled&&n!==t;)n=(n+e)%u.length,i=u[n];if(i.disabled)return;r.value=[u[n].id]}else{const e=u.find((e=>!e.disabled));e&&(r.value=[e.id])}}const g={register:function(e,l){const t=e,n=Symbol.for(`${o.description}:id`),i=c(n,null==m?void 0:m.vnode).indexOf(l);null==d(t.value)&&(t.value=i,t.useIndexAsValue=!0),i>-1?u.splice(i,0,t):u.push(t)},unregister:function(e){!function(){const e=u.find((e=>!e.disabled));e&&"force"===s.mandatory&&!r.value.length&&(r.value=[e.id])}();const l=u.findIndex((l=>l.id===e));u.splice(l,1)},selected:r,select:function(e,l){const t=u.find((l=>l.id===e));if(!l||!(null==t?void 0:t.disabled))if(s.multiple){const t=r.value.slice(),n=t.findIndex((l=>l===e)),i=~n;if(l=l??!i,i&&s.mandatory&&t.length<=1)return;if(!i&&null!=s.max&&t.length+1>s.max)return;n<0&&l?t.push(e):n>=0&&!l&&t.splice(n,1),r.value=t}else{const t=r.value.includes(e);if(s.mandatory&&t)return;r.value=l??!t?[e]:[]}},disabled:n(s,"disabled"),prev:()=>v(u.length-1),next:()=>v(1),isSelected:e=>r.value.includes(e),selectedClass:t((()=>s.selectedClass)),items:t((()=>u)),getItemIndex:e=>function(e,l){const t=x(e,[l]);return t.length?e.findIndex((e=>e.id===t[0])):-1}(u,e)};return i(o,g),g}function x(e,l){const t=[];return l.forEach((l=>{const n=e.find((e=>r(l,e.value))),i=e[l];null!=(null==n?void 0:n.value)?t.push(n.id):null!=i&&t.push(i.id)})),t}export{g as makeGroupItemProps,v as makeGroupProps,b as useGroup,h as useGroupItem};
