import{computed as e,shallowRef as t,watchEffect as r}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{isPrimitive as n,getPropertyFromItem as i,omit as o,pick as u,deepEqual as l}from"../util/helpers.mjs";import{propsFactory as a}from"../util/propsFactory.mjs";const s=a({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:Function},"list-items");function m(e,t){const r=i(t,e.itemTitle,t),n=i(t,e.itemValue,r),u=i(t,e.itemChildren),l={title:r,value:n,...!0===e.itemProps?"object"!=typeof t||null==t||Array.isArray(t)?void 0:"children"in t?o(t,["children"]):t:i(t,e.itemProps)};return{title:String(l.title??""),value:l.value,props:l,children:Array.isArray(u)?p(e,u):void 0,raw:t}}function p(e,t){const r=u(e,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),n=[];for(const i of t)n.push(m(r,i));return n}function c(i){const o=e((()=>p(i,i.items))),a=e((()=>o.value.some((e=>null===e.value)))),s=t(new Map),c=t([]);return r((()=>{const e=o.value,t=new Map,r=[];for(let i=0;i<e.length;i++){const o=e[i];if(n(o.value)||null===o.value){let e=t.get(o.value);e||(e=[],t.set(o.value,e)),e.push(o)}else r.push(o)}s.value=t,c.value=r})),{items:o,transformIn:function(e){const t=s.value,r=o.value,n=c.value,p=a.value,f=i.returnObject,v=!!i.valueComparator,d=i.valueComparator||l,h=u(i,["itemTitle","itemValue","itemChildren","itemProps","returnObject","valueComparator"]),y=[];e:for(const i of e){if(!p&&null===i)continue;if(f&&"string"==typeof i){y.push(m(h,i));continue}const e=t.get(i);if(!v&&e)y.push(...e);else{for(const e of v?r:n)if(d(i,e.value)){y.push(e);continue e}y.push(m(h,i))}}return y},transformOut:function(e){return i.returnObject?e.map((e=>{let{raw:t}=e;return t})):e.map((e=>{let{value:t}=e;return t}))}}}export{s as makeItemsProps,m as transformItem,p as transformItems,c as useItems};
