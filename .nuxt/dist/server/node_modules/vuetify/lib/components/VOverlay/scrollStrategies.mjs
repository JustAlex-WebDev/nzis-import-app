import{onScopeDispose as e}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{requestNewFrame as o}from"./requestNewFrame.mjs";import{getScrollParents as l,hasScrollbar as t}from"../../util/getScrollParent.mjs";import{propsFactory as r}from"../../util/propsFactory.mjs";import{convertToUnit as s}from"../../util/helpers.mjs";const a={none:null,close:function(e){n(e.targetEl.value??e.contentEl.value,(function(o){e.isActive.value=!1}))},block:function(o,r){var a;const c=null==(a=o.root.value)?void 0:a.offsetParent,n=[...new Set([...l(o.targetEl.value,r.contained?c:void 0),...l(o.contentEl.value,r.contained?c:void 0)])].filter((e=>!e.classList.contains("v-overlay-scroll-blocked"))),i=(void 0).innerWidth-(void 0).documentElement.offsetWidth,v=(d=c||(void 0).documentElement,t(d)&&d);var d;v&&o.root.value.classList.add("v-overlay--scroll-blocked");n.forEach(((e,o)=>{e.style.setProperty("--v-body-scroll-x",s(-e.scrollLeft)),e.style.setProperty("--v-body-scroll-y",s(-e.scrollTop)),e!==(void 0).documentElement&&e.style.setProperty("--v-scrollbar-offset",s(i)),e.classList.add("v-overlay-scroll-blocked")})),e((()=>{n.forEach(((e,o)=>{const l=parseFloat(e.style.getPropertyValue("--v-body-scroll-x")),t=parseFloat(e.style.getPropertyValue("--v-body-scroll-y")),r=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--v-body-scroll-x"),e.style.removeProperty("--v-body-scroll-y"),e.style.removeProperty("--v-scrollbar-offset"),e.classList.remove("v-overlay-scroll-blocked"),e.scrollLeft=-l,e.scrollTop=-t,e.style.scrollBehavior=r})),v&&o.root.value.classList.remove("v-overlay--scroll-blocked")}))},reposition:function(l,t,r){let s=!1,a=-1,c=-1;function i(e){o((()=>{var o,t;const r=performance.now();null==(t=(o=l.updateLocation).value)||t.call(o,e);const a=performance.now()-r;s=a/(1e3/60)>2}))}c=("undefined"==typeof requestIdleCallback?e=>e():requestIdleCallback)((()=>{r.run((()=>{n(l.targetEl.value??l.contentEl.value,(e=>{s?(cancelAnimationFrame(a),a=requestAnimationFrame((()=>{a=requestAnimationFrame((()=>{i(e)}))}))):i(e)}))}))})),e((()=>{"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(c),cancelAnimationFrame(a)}))}},c=r({scrollStrategy:{type:[String,Function],default:"block",validator:e=>"function"==typeof e||e in a}},"VOverlay-scroll-strategies");function n(o,t){const r=[void 0,...l(o)];r.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),e((()=>{r.forEach((e=>{e.removeEventListener("scroll",t)}))}))}export{c as makeScrollStrategyProps};
