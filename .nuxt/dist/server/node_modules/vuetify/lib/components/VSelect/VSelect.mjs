import{ref as e,computed as l,shallowRef as o,watch as t,createVNode as a,mergeProps as n,Fragment as i,createTextVNode as u,nextTick as r}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css            */import{makeVTextFieldProps as s,VTextField as p}from"../VTextField/VTextField.mjs";import{useScrolling as c}from"./useScrolling.mjs";import{useForm as m}from"../../composables/form.mjs";import{forwardRefs as v}from"../../composables/forwardRefs.mjs";import{IconValue as d}from"../../composables/icons.mjs";import{useItems as f,makeItemsProps as h}from"../../composables/list-items.mjs";import{useLocale as V}from"../../composables/locale.mjs";import{useProxiedModel as y}from"../../composables/proxiedModel.mjs";import{makeTransitionProps as b}from"../../composables/transition.mjs";import{VDialogTransition as g}from"../transitions/dialog-transition.mjs";import{VIcon as x}from"../VIcon/VIcon.mjs";import{VMenu as j}from"../VMenu/VMenu.mjs";import{VList as C}from"../VList/VList.mjs";import{VListItem as k}from"../VList/VListItem.mjs";import{VVirtualScroll as D}from"../VVirtualScroll/VVirtualScroll.mjs";import{VCheckboxBtn as w}from"../VCheckbox/VCheckboxBtn.mjs";import{VAvatar as S}from"../VAvatar/VAvatar.mjs";import{deepEqual as I,omit as P,wrapInArray as T,ensureValidVNode as _,checkPrintable as A,matchesSelector as B}from"../../util/helpers.mjs";import{VChip as O}from"../VChip/VChip.mjs";import{VDefaultsProvider as E}from"../VDefaultsProvider/VDefaultsProvider.mjs";import{genericComponent as L}from"../../util/defineComponent.mjs";import{propsFactory as M}from"../../util/propsFactory.mjs";import{useRender as U}from"../../util/useRender.mjs";const F=M({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:d,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...h({itemChildren:!1})},"Select"),R=M({...F(),...P(s({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...b({transition:{component:g}})},"VSelect"),$=L()({name:"VSelect",props:R(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(s,d){let{slots:h}=d;const{t:b}=V(),g=e(),P=e(),L=e(),{items:M,transformIn:F,transformOut:R}=f(s),$=y(s,"modelValue",[],(e=>F(null===e?[null]:T(e))),(e=>{const l=R(e);return s.multiple?l:l[0]??null})),z=l((()=>"function"==typeof s.counterValue?s.counterValue($.value):"number"==typeof s.counterValue?s.counterValue:$.value.length)),H=m(s),K=l((()=>$.value.map((e=>e.value)))),N=o(!1);let G,W="";const q=l((()=>s.hideSelected?M.value.filter((e=>!$.value.some((l=>(s.valueComparator||I)(l,e))))):M.value)),J=l((()=>s.hideNoData&&!q.value.length||H.isReadonly.value||H.isDisabled.value)),Q=y(s,"menu"),X=l({get:()=>Q.value,set:e=>{var l;Q.value&&!e&&(null==(l=P.value)?void 0:l.Î¨openChildren.size)||e&&J.value||(Q.value=e)}}),Y=l((()=>X.value?s.closeText:s.openText)),Z=l((()=>{var e;return{...s.menuProps,activatorProps:{...(null==(e=s.menuProps)?void 0:e.activatorProps)||{},"aria-haspopup":"listbox"}}})),ee=e(),le=c(ee,g);function oe(e){s.openOnClear&&(X.value=!0)}function te(){J.value||(X.value=!X.value)}function ae(e){A(e)&&ne(e)}function ne(e){var l,o;if(!e.key||H.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"," "].includes(e.key)&&(X.value=!0),["Escape","Tab"].includes(e.key)&&(X.value=!1),"Home"===e.key?null==(l=ee.value)||l.focus("first"):"End"===e.key&&(null==(o=ee.value)||o.focus("last"));if(!A(e))return;const t=performance.now();t-G>1e3&&(W=""),W+=e.key.toLowerCase(),G=t;const a=M.value.find((e=>e.title.toLowerCase().startsWith(W)));void 0!==a&&($.value=[a],q.value.indexOf(a))}function ie(e){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.props.disabled)if(s.multiple){const o=$.value.findIndex((l=>(s.valueComparator||I)(l.value,e.value))),t=null==l?!~o:l;if(~o){const l=t?[...$.value,e]:[...$.value];l.splice(o,1),$.value=l}else t&&($.value=[...$.value,e])}else{const o=!1!==l;$.value=o?[e]:[],r((()=>{X.value=!1}))}}function ue(e){var l;(null==(l=ee.value)?void 0:l.$el.contains(e.relatedTarget))||(X.value=!1)}function re(){var e;s.eager&&(null==(e=L.value)||e.calculateVisibleItems())}function se(){var e;N.value&&(null==(e=g.value)||e.focus())}function pe(e){N.value=!0}function ce(e){if(null==e)$.value=[];else if(B(g.value)||B(g.value)){const l=M.value.find((l=>l.title===e));l&&ie(l)}else g.value&&(g.value.value="")}return t(X,(()=>{!s.hideSelected&&X.value&&$.value.length&&q.value.findIndex((e=>$.value.some((l=>(s.valueComparator||I)(l.value,e.value)))))})),t((()=>s.items),((e,l)=>{X.value||N.value&&!l.length&&e.length&&(X.value=!0)})),U((()=>{const e=!(!s.chips&&!h.chip),l=!!(!s.hideNoData||q.value.length||h["prepend-item"]||h["append-item"]||h["no-data"]),o=$.value.length>0,t=p.filterProps(s),r=o||!N.value&&s.label&&!s.persistentPlaceholder?void 0:s.placeholder;return a(p,n({ref:g},t,{modelValue:$.value.map((e=>e.props.value)).join(", "),"onUpdate:modelValue":ce,focused:N.value,"onUpdate:focused":e=>N.value=e,validationValue:$.externalValue,counterValue:z.value,dirty:o,class:["v-select",{"v-select--active-menu":X.value,"v-select--chips":!!s.chips,["v-select--"+(s.multiple?"multiple":"single")]:!0,"v-select--selected":$.value.length,"v-select--selection-slot":!!h.selection},s.class],style:s.style,inputmode:"none",placeholder:r,"onClick:clear":oe,"onMousedown:control":te,onBlur:ue,onKeydown:ne,"aria-label":b(Y.value),title:b(Y.value)}),{...h,default:()=>a(i,null,[a(j,n({ref:P,modelValue:X.value,"onUpdate:modelValue":e=>X.value=e,activator:"parent",contentClass:"v-select__content",disabled:J.value,eager:s.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:s.transition,onAfterEnter:re,onAfterLeave:se},Z.value),{default:()=>[l&&a(C,n({ref:ee,selected:K.value,selectStrategy:s.multiple?"independent":"single-independent",onMousedown:e=>e.preventDefault(),onKeydown:ae,onFocusin:pe,tabindex:"-1","aria-live":"polite",color:s.itemColor??s.color},le,s.listProps),{default:()=>{var e,l,o;return[null==(e=h["prepend-item"])?void 0:e.call(h),!q.value.length&&!s.hideNoData&&((null==(l=h["no-data"])?void 0:l.call(h))??a(k,{key:"no-data",title:b(s.noDataText)},null)),a(D,{ref:L,renderless:!0,items:q.value,itemKey:"value"},{default:e=>{var l;let{item:o,index:t,itemRef:u}=e;const r=n(o.props,{ref:u,key:o.value,onClick:()=>ie(o,null)});return(null==(l=h.item)?void 0:l.call(h,{item:o,index:t,props:r}))??a(k,n(r,{role:"option"}),{prepend:e=>{let{isSelected:l}=e;return a(i,null,[s.multiple&&!s.hideSelected?a(w,{key:o.value,modelValue:l,ripple:!1,tabindex:"-1"},null):void 0,o.props.prependAvatar&&a(S,{image:o.props.prependAvatar},null),o.props.prependIcon&&a(x,{icon:o.props.prependIcon},null)])}})}}),null==(o=h["append-item"])?void 0:o.call(h)]}})]}),$.value.map(((l,o)=>{function t(e){e.stopPropagation(),e.preventDefault(),ie(l,!1)}const i={"onClick:close":t,onKeydown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),t(e))},onMousedown(e){e.preventDefault(),e.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},r=e?!!h.chip:!!h.selection,p=r?_(e?h.chip({item:l,index:o,props:i}):h.selection({item:l,index:o})):void 0;if(!r||p)return a("div",{key:l.value,class:"v-select__selection"},[e?h.chip?a(E,{key:"chip-defaults",defaults:{VChip:{closable:s.closableChips,size:"small",text:l.title}}},{default:()=>[p]}):a(O,n({key:"chip",closable:s.closableChips,size:"small",text:l.title,disabled:l.props.disabled},i),null):p??a("span",{class:"v-select__selection-text"},[l.title,s.multiple&&o<$.value.length-1&&a("span",{class:"v-select__selection-comma"},[u(",")])])])}))]),"append-inner":function(){for(var e,l,o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return a(i,null,[null==(e=h["append-inner"])?void 0:e.call(h,...t),s.menuIcon?a(x,{class:"v-select__menu-icon",color:null==(l=g.value)?void 0:l.fieldIconColor,icon:s.menuIcon},null):void 0])}})})),v({isFocused:N,menu:X,select:ie},g)}});export{$ as VSelect,F as makeSelectProps,R as makeVSelectProps};
