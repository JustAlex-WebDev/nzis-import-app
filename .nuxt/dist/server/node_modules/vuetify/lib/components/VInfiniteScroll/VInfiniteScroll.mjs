import{ref as e,shallowRef as t,computed as i,watch as r,createVNode as o,createTextVNode as n,nextTick as l}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css                    */import{useDimension as s,makeDimensionProps as a}from"../../composables/dimensions.mjs";import{useIntersectionObserver as c}from"../../composables/intersectionObserver.mjs";import{useLocale as u}from"../../composables/locale.mjs";import{makeTagProps as d}from"../../composables/tag.mjs";import{VProgressCircular as m}from"../VProgressCircular/VProgressCircular.mjs";import{VBtn as v}from"../VBtn/VBtn.mjs";import{genericComponent as f,defineComponent as p}from"../../util/defineComponent.mjs";import{propsFactory as g}from"../../util/propsFactory.mjs";import{convertToUnit as y}from"../../util/helpers.mjs";import{useRender as S}from"../../util/useRender.mjs";const j=g({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...a(),...d()},"VInfiniteScroll"),b=p({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,t)=>!0},setup(e,t){let{emit:i}=t;const{intersectionRef:l,isIntersecting:s}=c();return r(s,(async t=>{i("intersect",e.side,t)})),S((()=>o("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:l},[n("Â ")]))),{}}}),h=f()({name:"VInfiniteScroll",props:j(),emits:{load:e=>!0},setup(r,n){let{slots:a,emit:c}=n;const d=e(),f=t("ok"),p=t("ok"),g=i((()=>y(r.margin))),j=t(!1);function h(){if(!d.value)return 0;const e="vertical"===r.direction?"scrollHeight":"scrollWidth";return d.value[e]}function I(e,t){"start"===e?f.value=t:"end"===e&&(p.value=t)}let V=0;function k(e,t){j.value=t,j.value&&x(e)}function x(e){if("manual"!==r.mode&&!j.value)return;const t=function(e){return"start"===e?f.value:p.value}(e);d.value&&!["empty","loading"].includes(t)&&(V=h(),I(e,"loading"),c("load",{side:e,done:function(t){I(e,t),l((()=>{"empty"!==t&&"error"!==t&&("ok"===t&&"start"===e&&function(e){if(!d.value)return;const t="vertical"===r.direction?"scrollTop":"scrollLeft";d.value[t]=e}(h()-V+function(){if(!d.value)return 0;const e="vertical"===r.direction?"scrollTop":"scrollLeft";return d.value[e]}()),"manual"!==r.mode&&l((()=>{(void 0).requestAnimationFrame((()=>{(void 0).requestAnimationFrame((()=>{(void 0).requestAnimationFrame((()=>{x(e)}))}))}))})))}))}}))}const{t:M}=u();function T(e,t){var i,n,l,s,c;if(r.side!==e&&"both"!==r.side)return;const u=()=>x(e),d={side:e,props:{onClick:u,color:r.color}};return"error"===t?null==(i=a.error)?void 0:i.call(a,d):"empty"===t?(null==(n=a.empty)?void 0:n.call(a,d))??o("div",null,[M(r.emptyText)]):"manual"===r.mode?"loading"===t?(null==(l=a.loading)?void 0:l.call(a,d))??o(m,{indeterminate:!0,color:r.color},null):(null==(s=a["load-more"])?void 0:s.call(a,d))??o(v,{variant:"outlined",color:r.color,onClick:u},{default:()=>[M(r.loadMoreText)]}):(null==(c=a.loading)?void 0:c.call(a,d))??o(m,{indeterminate:!0,color:r.color},null)}const{dimensionStyles:C}=s(r);S((()=>{const e=r.tag,t="start"===r.side||"both"===r.side,i="end"===r.side||"both"===r.side,n="intersect"===r.mode;return o(e,{ref:d,class:["v-infinite-scroll",`v-infinite-scroll--${r.direction}`,{"v-infinite-scroll--start":t,"v-infinite-scroll--end":i}],style:C.value},{default:()=>{var e;return[o("div",{class:"v-infinite-scroll__side"},[T("start",f.value)]),t&&n&&o(b,{key:"start",side:"start",onIntersect:k,rootMargin:g.value},null),null==(e=a.default)?void 0:e.call(a),i&&n&&o(b,{key:"end",side:"end",onIntersect:k,rootMargin:g.value},null),o("div",{class:"v-infinite-scroll__side"},[T("end",p.value)])]}})}))}});export{h as VInfiniteScroll,b as VInfiniteScrollIntersect,j as makeVInfiniteScrollProps};
