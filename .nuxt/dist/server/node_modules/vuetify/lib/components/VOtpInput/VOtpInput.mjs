import{computed as e,ref as l,watch as o,nextTick as t,createVNode as a,mergeProps as u,Fragment as r}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css              */import{makeVFieldProps as n,VField as i}from"../VField/VField.mjs";import{VOverlay as s}from"../VOverlay/VOverlay.mjs";import{VProgressCircular as p}from"../VProgressCircular/VProgressCircular.mjs";import{provideDefaults as d}from"../../composables/defaults.mjs";import{useDimension as v,makeDimensionProps as m}from"../../composables/dimensions.mjs";import{useFocus as c,makeFocusProps as f}from"../../composables/focus.mjs";import{useLocale as b}from"../../composables/locale.mjs";import{useProxiedModel as y}from"../../composables/proxiedModel.mjs";import{genericComponent as g}from"../../util/defineComponent.mjs";import{propsFactory as h}from"../../util/propsFactory.mjs";import{useRender as j}from"../../util/useRender.mjs";import{pick as V,filterInputAttrs as x,focusChild as k}from"../../util/helpers.mjs";const A=h({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...m(),...f(),...V(n({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),F=g()({name:"VOtpInput",props:A(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(n,m){let{attrs:f,emit:g,slots:h}=m;const{dimensionStyles:V}=v(n),{isFocused:A,focus:F,blur:_}=c(n),C=y(n,"modelValue","",(e=>null==e?[]:String(e).split("")),(e=>e.join(""))),{t:S}=b(),D=e((()=>Number(n.length))),w=e((()=>Array(D.value).fill(0))),B=l(-1),O=l(),I=l([]),P=e((()=>I.value[B.value]));function N(){if(z(P.value.value))return void(P.value.value="");const e=C.value.slice(),l=P.value.value;e[B.value]=l;let o=null;B.value>C.value.length?o=C.value.length+1:B.value+1!==D.value&&(o="next"),C.value=e,o&&k(O.value,o)}function R(e){const l=C.value.slice(),o=B.value;let t=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),"ArrowLeft"===e.key?t="prev":"ArrowRight"===e.key?t="next":["Backspace","Delete"].includes(e.key)&&(l[B.value]="",C.value=l,B.value>0&&"Backspace"===e.key?t="prev":requestAnimationFrame((()=>{var e;null==(e=I.value[o])||e.select()}))),requestAnimationFrame((()=>{null!=t&&k(O.value,t)})))}function q(){_(),B.value=-1}function z(e){return"number"===n.type&&/[^0-9]/g.test(e)}return d({VField:{color:e((()=>n.color)),bgColor:e((()=>n.color)),baseColor:e((()=>n.baseColor)),disabled:e((()=>n.disabled)),error:e((()=>n.error)),variant:e((()=>n.variant))}},{scoped:!0}),o(C,(e=>{e.length===D.value&&g("finish",e.join(""))}),{deep:!0}),o(B,(e=>{e<0||t((()=>{var l;null==(l=I.value[e])||l.select()}))})),j((()=>{var e;const[l,o]=x(f);return a("div",u({class:["v-otp-input",{"v-otp-input--divided":!!n.divider},n.class],style:[n.style]},l),[a("div",{ref:O,class:"v-otp-input__content",style:[V.value]},[w.value.map(((e,l)=>a(r,null,[n.divider&&0!==l&&a("span",{class:"v-otp-input__divider"},[n.divider]),a(i,{focused:A.value&&n.focusAll||B.value===l,key:l},{...h,loader:void 0,default:()=>a("input",{ref:e=>I.value[l]=e,"aria-label":S(n.label,l+1),autofocus:0===l&&n.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:n.disabled,inputmode:"number"===n.type?"numeric":"text",min:"number"===n.type?0:void 0,maxlength:0===l?D.value:"1",placeholder:n.placeholder,type:"number"===n.type?"text":n.type,value:C.value[l],onInput:N,onFocus:e=>{return o=l,F(),void(B.value=o);var o},onBlur:q,onKeydown:R,onPaste:e=>function(e,l){var o,t;l.preventDefault(),l.stopPropagation();const a=(null==(o=null==l?void 0:l.clipboardData)?void 0:o.getData("Text").slice(0,D.value))??"";z(a)||(C.value=a.split(""),null==(t=I.value)||t[e].blur())}(l,e)},null)})]))),a("input",u({class:"v-otp-input-input",type:"hidden"},o,{value:C.value.join("")}),null),a(s,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!n.loading,persistent:!0},{default:()=>{var e;return[(null==(e=h.loader)?void 0:e.call(h))??a(p,{color:"boolean"==typeof n.loading?void 0:n.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),null==(e=h.default)?void 0:e.call(h)])])})),{blur:()=>{var e;null==(e=I.value)||e.some((e=>e.blur()))},focus:()=>{var e;null==(e=I.value)||e[0].focus()},reset:function(){C.value=[]},isFocused:A}}});export{F as VOtpInput,A as makeVOtpInputProps};
