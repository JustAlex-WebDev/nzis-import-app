import{computed as e,ref as t,createVNode as l,mergeProps as o,Fragment as n,withDirectives as r,resolveDirective as i,cloneVNode as u,nextTick as a}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css               */import{VCounter as s}from"../VCounter/VCounter.mjs";import{makeVFieldProps as c,VField as d}from"../VField/VField.mjs";import{makeVInputProps as p,VInput as f}from"../VInput/VInput.mjs";import{useFocus as m}from"../../composables/focus.mjs";import{forwardRefs as v}from"../../composables/forwardRefs.mjs";import{useProxiedModel as x}from"../../composables/proxiedModel.mjs";import{Intersect as V}from"../../directives/intersect/index.mjs";import{genericComponent as y}from"../../util/defineComponent.mjs";import{propsFactory as b}from"../../util/propsFactory.mjs";import{useRender as g}from"../../util/useRender.mjs";import{filterInputAttrs as j,callEvent as h}from"../../util/helpers.mjs";const _=["color","file","time","date","datetime-local","week","month"],C=b({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...p(),...c()},"VTextField"),k=y()({name:"VTextField",directives:{Intersect:V},inheritAttrs:!1,props:C(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(c,p){let{attrs:V,emit:y,slots:b}=p;const C=x(c,"modelValue"),{isFocused:k,focus:F,blur:S}=m(c),I=e((()=>"function"==typeof c.counterValue?c.counterValue(C.value):"number"==typeof c.counterValue?c.counterValue:(C.value??"").toString().length)),w=e((()=>V.maxlength?V.maxlength:!c.counter||"number"!=typeof c.counter&&"string"!=typeof c.counter?void 0:c.counter)),B=e((()=>["plain","underlined"].includes(c.variant)));function P(e,t){var l,o;c.autofocus&&e&&(null==(o=null==(l=t[0].target)?void 0:l.focus)||o.call(l))}const D=t(),M=t(),E=t(),R=e((()=>_.includes(c.type)||c.persistentPlaceholder||k.value||c.active));function T(){var e;E.value!==(void 0).activeElement&&(null==(e=E.value)||e.focus()),k.value||F()}function z(e){y("mousedown:control",e),e.target!==E.value&&(T(),e.preventDefault())}function A(e){T(),y("click:control",e)}function N(e){e.stopPropagation(),T(),a((()=>{C.value=null,h(c["onClick:clear"],e)}))}function U(e){var t;const l=e.target;if(C.value=l.value,(null==(t=c.modelModifiers)?void 0:t.trim)&&["text","search","password","tel","url"].includes(c.type)){const e=[l.selectionStart,l.selectionEnd];a((()=>{l.selectionStart=e[0],l.selectionEnd=e[1]}))}}return g((()=>{const e=!!(b.counter||!1!==c.counter&&null!=c.counter),t=!(!e&&!b.details),[a,p]=j(V),{modelValue:m,...v}=f.filterProps(c),x=d.filterProps(c);return l(f,o({ref:D,modelValue:C.value,"onUpdate:modelValue":e=>C.value=e,class:["v-text-field",{"v-text-field--prefixed":c.prefix,"v-text-field--suffixed":c.suffix,"v-input--plain-underlined":B.value},c.class],style:c.style},a,v,{centerAffix:!B.value,focused:k.value}),{...b,default:e=>{let{id:t,isDisabled:a,isDirty:s,isReadonly:f,isValid:m}=e;return l(d,o({ref:M,onMousedown:z,onClick:A,"onClick:clear":N,"onClick:prependInner":c["onClick:prependInner"],"onClick:appendInner":c["onClick:appendInner"],role:c.role},x,{id:t.value,active:R.value||s.value,dirty:s.value||c.dirty,disabled:a.value,focused:k.value,error:!1===m.value}),{...b,default:e=>{let{props:{class:t,...s}}=e;const d=r(l("input",o({ref:E,value:C.value,onInput:U,autofocus:c.autofocus,readonly:f.value,disabled:a.value,name:c.name,placeholder:c.placeholder,size:1,type:c.type,onFocus:T,onBlur:S},s,p),null),[[i("intersect"),{handler:P},null,{once:!0}]]);return l(n,null,[c.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[c.prefix])]),b.default?l("div",{class:t,"data-no-activator":""},[b.default(),d]):u(d,{class:t}),c.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[c.suffix])])])}})},details:t?t=>{var o;return l(n,null,[null==(o=b.details)?void 0:o.call(b,t),e&&l(n,null,[l("span",null,null),l(s,{active:c.persistentCounter||k.value,value:I.value,max:w.value,disabled:c.disabled},b.counter)])])}:void 0})})),v({},D,M,E)}});export{k as VTextField,C as makeVTextFieldProps};
