import{toRefs as e,computed as t,toRef as o,provide as a,createVNode as l,mergeProps as r,Fragment as s}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{makeDataTableProps as m}from"./VDataTable.mjs";import{makeVDataTableFooterProps as p,VDataTableFooter as d}from"./VDataTableFooter.mjs";import{VDataTableHeaders as u}from"./VDataTableHeaders.mjs";import{VDataTableRows as i}from"./VDataTableRows.mjs";import{provideExpanded as n}from"./composables/expand.mjs";import{createGroupBy as g,provideGroupBy as c,useGroupedItems as v}from"./composables/group.mjs";import{createHeaders as b}from"./composables/headers.mjs";import{useDataTableItems as f}from"./composables/items.mjs";import{useOptions as y}from"./composables/options.mjs";import{createPagination as S,providePagination as h,makeDataTablePaginateProps as j}from"./composables/paginate.mjs";import{provideSelection as P}from"./composables/select.mjs";import{createSort as x,provideSort as D}from"./composables/sort.mjs";import{provideDefaults as B}from"../../composables/defaults.mjs";import{VTable as T}from"../VTable/VTable.mjs";import{VDivider as V}from"../VDivider/VDivider.mjs";import{genericComponent as w}from"../../util/defineComponent.mjs";import{propsFactory as I}from"../../util/propsFactory.mjs";import{useRender as E}from"../../util/useRender.mjs";const G=I({itemsLength:{type:[Number,String],required:!0},...j(),...m(),...p()},"VDataTableServer"),H=w()({name:"VDataTableServer",props:G(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(m,p){let{attrs:j,slots:w}=p;const{groupBy:I}=g(m),{sortBy:G,multiSort:H,mustSort:_}=x(m),{page:R,itemsPerPage:C}=S(m),{disableSort:F}=e(m),L=t((()=>parseInt(m.itemsLength,10))),{columns:N,headers:k}=b(m,{groupBy:I,showSelect:o(m,"showSelect"),showExpand:o(m,"showExpand")}),{items:A}=f(m,N),{toggleSort:O}=D({sortBy:G,multiSort:H,mustSort:_,page:R}),{opened:q,isGroupOpen:z,toggleGroup:U,extractRows:J}=c({groupBy:I,sortBy:G,disableSort:F}),{pageCount:K,setItemsPerPage:M}=h({page:R,itemsPerPage:C,itemsLength:L}),{flatItems:Q}=v(A,I,q),{isSelected:W,select:X,selectAll:Y,toggleSelect:Z,someSelected:$,allSelected:ee}=P(m,{allItems:A,currentPage:A}),{isExpanded:te,toggleExpand:oe}=n(m),ae=t((()=>J(A.value)));y({page:R,itemsPerPage:C,sortBy:G,groupBy:I,search:o(m,"search")}),a("v-data-table",{toggleSort:O,sortBy:G}),B({VDataTableRows:{hideNoData:o(m,"hideNoData"),noDataText:o(m,"noDataText"),loading:o(m,"loading"),loadingText:o(m,"loadingText")}});const le=t((()=>({page:R.value,itemsPerPage:C.value,sortBy:G.value,pageCount:K.value,toggleSort:O,setItemsPerPage:M,someSelected:$.value,allSelected:ee.value,isSelected:W,select:X,selectAll:Y,toggleSelect:Z,isExpanded:te,toggleExpand:oe,isGroupOpen:z,toggleGroup:U,items:ae.value.map((e=>e.raw)),internalItems:ae.value,groupedItems:Q.value,columns:N.value,headers:k.value})));E((()=>{const e=d.filterProps(m),t=u.filterProps(m),o=i.filterProps(m),a=T.filterProps(m);return l(T,r({class:["v-data-table",{"v-data-table--loading":m.loading},m.class],style:m.style},a,{fixedHeader:m.fixedHeader||m.sticky}),{top:()=>{var e;return null==(e=w.top)?void 0:e.call(w,le.value)},default:()=>{var e,a,p,d,n,g;return w.default?w.default(le.value):l(s,null,[null==(e=w.colgroup)?void 0:e.call(w,le.value),!m.hideDefaultHeader&&l("thead",{key:"thead",class:"v-data-table__thead",role:"rowgroup"},[l(u,t,w)]),null==(a=w.thead)?void 0:a.call(w,le.value),!m.hideDefaultBody&&l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[null==(p=w["body.prepend"])?void 0:p.call(w,le.value),w.body?w.body(le.value):l(i,r(j,o,{items:Q.value}),w),null==(d=w["body.append"])?void 0:d.call(w,le.value)]),null==(n=w.tbody)?void 0:n.call(w,le.value),null==(g=w.tfoot)?void 0:g.call(w,le.value)])},bottom:()=>w.bottom?w.bottom(le.value):!m.hideDefaultFooter&&l(s,null,[l(V,null,null),l(d,e,{prepend:w["footer.prepend"]})])})}))}});export{H as VDataTableServer,G as makeVDataTableServerProps};
