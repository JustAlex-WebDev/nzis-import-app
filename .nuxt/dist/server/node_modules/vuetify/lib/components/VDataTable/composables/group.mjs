import{useProxiedModel as t}from"../../../composables/proxiedModel.mjs";import{ref as e,computed as o,provide as r,inject as n}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{propsFactory as u}from"../../../util/propsFactory.mjs";import{getObjectValueByPath as s}from"../../../util/helpers.mjs";const i=u({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),p=Symbol.for("vuetify:data-table-group");function l(e){return{groupBy:t(e,"groupBy")}}function a(t){const{disableSort:n,groupBy:u,sortBy:s}=t,i=e(new Set);function l(t){return i.value.has(t.id)}const a={sortByWithGroups:o((()=>u.value.map((t=>({...t,order:t.order??!1}))).concat((null==n?void 0:n.value)?[]:s.value))),toggleGroup:function(t){const e=new Set(i.value);l(t)?e.delete(t.id):e.add(t.id),i.value=e},opened:i,groupBy:u,extractRows:function(t){return function t(e){const o=[];for(const r of e.items)"type"in r&&"group"===r.type?o.push(...t(r)):o.push(r);return[...new Set(o)]}({items:t})},isGroupOpen:l};return r(p,a),a}function c(){const t=n(p);if(!t)throw new Error("Missing group!");return t}function f(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"root";if(!e.length)return[];const n=function(t,e){if(!t.length)return[];const o=new Map;for(const r of t){const t=s(r.raw,e);o.has(t)||o.set(t,[]),o.get(t).push(r)}return o}(t,e[0]),u=[],i=e.slice(1);return n.forEach(((t,n)=>{const s=e[0],p=`${r}_${s}_${n}`;u.push({depth:o,id:p,key:s,value:n,items:i.length?f(t,i,o+1,p):t,type:"group"})})),u}function d(t,e){const o=[];for(const r of t)"type"in r&&"group"===r.type?(null!=r.value&&o.push(r),(e.has(r.id)||null==r.value)&&o.push(...d(r.items,e))):o.push(r);return o}function m(t,e,r){return{flatItems:o((()=>{if(!e.value.length)return t.value;return d(f(t.value,e.value.map((t=>t.key))),r.value)}))}}export{l as createGroupBy,i as makeDataTableGroupProps,a as provideGroupBy,c as useGroupBy,m as useGroupedItems};
