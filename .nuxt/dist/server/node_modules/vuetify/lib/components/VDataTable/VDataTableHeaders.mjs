import{computed as e,createVNode as t,Fragment as a,mergeProps as l}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{VDataTableColumn as o}from"./VDataTableColumn.mjs";import{useHeaders as s}from"./composables/headers.mjs";import{useSelection as r}from"./composables/select.mjs";import{useSort as d}from"./composables/sort.mjs";import{useBackgroundColor as i}from"../../composables/color.mjs";import{useDisplay as n,makeDisplayProps as c}from"../../composables/display.mjs";import{IconValue as m}from"../../composables/icons.mjs";import{useLoader as u,makeLoaderProps as p,LoaderSlot as v}from"../../composables/loader.mjs";import{useLocale as b}from"../../composables/locale.mjs";import{VSelect as f}from"../VSelect/VSelect.mjs";import{VChip as h}from"../VChip/VChip.mjs";import{VIcon as y}from"../VIcon/VIcon.mjs";import{VCheckboxBtn as k}from"../VCheckbox/VCheckboxBtn.mjs";import{genericComponent as g}from"../../util/defineComponent.mjs";import{propsFactory as x}from"../../util/propsFactory.mjs";import{useRender as S}from"../../util/useRender.mjs";import{convertToUnit as _}from"../../util/helpers.mjs";const j=x({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:m,default:"$sortAsc"},sortDescIcon:{type:m,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...c(),...p()},"VDataTableHeaders"),C=g()({name:"VDataTableHeaders",props:j(),setup(c,m){let{slots:p}=m;const{t:g}=b(),{toggleSort:x,sortBy:j,isSorted:C}=d(),{someSelected:V,allSelected:w,selectAll:I,showSelectAll:B}=r(),{columns:A,headers:D}=s(),{loaderClasses:$}=u(c);function H(e,t){if(c.sticky||c.fixedHeader||e.fixed)return{position:"sticky",left:e.fixed?_(e.fixedOffset):void 0,top:c.sticky||c.fixedHeader?`calc(var(--v-table-header-height) * ${t})`:void 0}}function P(e){const t=j.value.find((t=>t.key===e.key));return t?"asc"===t.order?c.sortAscIcon:c.sortDescIcon:c.sortAscIcon}const{backgroundColorClasses:O,backgroundColorStyles:T}=i(c,"color"),{displayClasses:W,mobile:F}=n(c),z=e((()=>({headers:D.value,columns:A.value,toggleSort:x,isSorted:C,sortBy:j.value,someSelected:V.value,allSelected:w.value,selectAll:I,getSortIcon:P}))),U=e((()=>["v-data-table__th",{"v-data-table__th--sticky":c.sticky||c.fixedHeader},W.value,$.value])),G=e=>{let{column:a,x:s,y:r}=e;const d="data-table-select"===a.key||"data-table-expand"===a.key,i=l(c.headerProps??{},a.headerProps??{});return t(o,l({tag:"th",align:a.align,class:[{"v-data-table__th--sortable":a.sortable&&!c.disableSort,"v-data-table__th--sorted":C(a),"v-data-table__th--fixed":a.fixed},...U.value],style:{width:_(a.width),minWidth:_(a.minWidth),maxWidth:_(a.maxWidth),...H(a,r)},colspan:a.colspan,rowspan:a.rowspan,onClick:a.sortable?()=>x(a):void 0,fixed:a.fixed,nowrap:a.nowrap,lastFixed:a.lastFixed,noPadding:d},i),{default:()=>{var e;const l=`header.${a.key}`,o={column:a,selectAll:I,isSorted:C,toggleSort:x,sortBy:j.value,someSelected:V.value,allSelected:w.value,getSortIcon:P};return p[l]?p[l](o):"data-table-select"===a.key?(null==(e=p["header.data-table-select"])?void 0:e.call(p,o))??(B.value&&t(k,{modelValue:w.value,indeterminate:V.value&&!w.value,"onUpdate:modelValue":I},null)):t("div",{class:"v-data-table-header__content"},[t("span",null,[a.title]),a.sortable&&!c.disableSort&&t(y,{key:"icon",class:"v-data-table-header__sort-icon",icon:P(a)},null),c.multiSort&&C(a)&&t("div",{key:"badge",class:["v-data-table-header__sort-badge",...O.value],style:T.value},[j.value.findIndex((e=>e.key===a.key))+1])])}})},M=()=>{const a=l(c.headerProps??{}??{}),s=e((()=>A.value.filter((e=>(null==e?void 0:e.sortable)&&!c.disableSort)))),r=e((()=>{if(null!=A.value.find((e=>"data-table-select"===e.key)))return w.value?"$checkboxOn":V.value?"$checkboxIndeterminate":"$checkboxOff"}));return t(o,l({tag:"th",class:[...U.value],colspan:D.value.length+1},a),{default:()=>[t("div",{class:"v-data-table-header__content"},[t(f,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:s.value,label:g("$vuetify.dataTable.sortBy"),multiple:c.multiSort,variant:"underlined","onClick:clear":()=>j.value=[],appendIcon:r.value,"onClick:append":()=>I(!w.value)},{...p,chip:e=>{var a;return t(h,{onClick:(null==(a=e.item.raw)?void 0:a.sortable)?()=>x(e.item.raw):void 0,onMousedown:e=>{e.preventDefault(),e.stopPropagation()}},{default:()=>[e.item.title,t(y,{class:["v-data-table__td-sort-icon",C(e.item.raw)&&"v-data-table__td-sort-icon-active"],icon:P(e.item.raw),size:"small"},null)]})}})])]})};S((()=>F.value?t("tr",null,[t(M,null,null)]):t(a,null,[p.headers?p.headers(z.value):D.value.map(((e,a)=>t("tr",null,[e.map(((e,l)=>t(G,{column:e,x:l,y:a},null)))]))),c.loading&&t("tr",{class:"v-data-table-progress"},[t("th",{colspan:A.value.length},[t(v,{name:"v-data-table-progress",absolute:!0,active:!0,color:"boolean"==typeof c.loading?void 0:c.loading,indeterminate:!0},{default:p.loader})])])])))}});export{C as VDataTableHeaders,j as makeVDataTableHeadersProps};
