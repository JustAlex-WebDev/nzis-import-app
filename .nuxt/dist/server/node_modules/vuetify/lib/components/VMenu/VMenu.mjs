import{useId as e,computed as t,ref as o,inject as r,shallowRef as l,provide as n,watch as a,mergeProps as s,createVNode as i}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css          */import{makeVOverlayProps as u,VOverlay as m}from"../VOverlay/VOverlay.mjs";import{forwardRefs as p}from"../../composables/forwardRefs.mjs";import{useRtl as v}from"../../composables/locale.mjs";import{useProxiedModel as c}from"../../composables/proxiedModel.mjs";import{useScopeId as d}from"../../composables/scopeId.mjs";import{VMenuSymbol as f}from"./shared.mjs";import{isClickInsideElement as y,omit as g,focusChild as w,getNextElement as b,focusableChildren as j}from"../../util/helpers.mjs";import{VDialogTransition as k}from"../transitions/dialog-transition.mjs";import{VDefaultsProvider as A}from"../VDefaultsProvider/VDefaultsProvider.mjs";import{genericComponent as D}from"../../util/defineComponent.mjs";import{propsFactory as V}from"../../util/propsFactory.mjs";import{useRender as E}from"../../util/useRender.mjs";const h=V({id:String,submenu:Boolean,...g(u({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:k}}),["absolute"])},"VMenu"),P=D()({name:"VMenu",props:h(),emits:{"update:modelValue":e=>!0},setup(u,g){let{slots:k}=g;const D=c(u,"modelValue"),{scopeId:V}=d(),{isRtl:h}=v(),P=e(),x=t((()=>u.id||`v-menu-${P}`)),C=o(),M=r(f,null),R=l(new Set);function T(e){null==M||M.closeParents(e)}function I(e){var t,o,r,l,n;if(!u.disabled)if("Tab"===e.key||"Enter"===e.key&&!u.closeOnContentClick){if("Enter"===e.key&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&e.target.closest("form")))return;"Enter"===e.key&&e.preventDefault();b(j(null==(t=C.value)?void 0:t.contentEl,!1),e.shiftKey?"prev":"next",(e=>e.tabIndex>=0))||(D.value=!1,null==(r=null==(o=C.value)?void 0:o.activatorEl)||r.focus())}else u.submenu&&e.key===(h.value?"ArrowRight":"ArrowLeft")&&(D.value=!1,null==(n=null==(l=C.value)?void 0:l.activatorEl)||n.focus())}function L(e){var t;if(u.disabled)return;const o=null==(t=C.value)?void 0:t.contentEl;o&&D.value?"ArrowDown"===e.key?(e.preventDefault(),e.stopImmediatePropagation(),w(o,"next")):"ArrowUp"===e.key?(e.preventDefault(),e.stopImmediatePropagation(),w(o,"prev")):u.submenu&&(e.key===(h.value?"ArrowRight":"ArrowLeft")?D.value=!1:e.key===(h.value?"ArrowLeft":"ArrowRight")&&(e.preventDefault(),w(o,"first"))):(u.submenu?e.key===(h.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(e.key))&&(D.value=!0,e.preventDefault(),setTimeout((()=>setTimeout((()=>L(e))))))}n(f,{register(){R.value.add(P)},unregister(){R.value.delete(P)},closeParents(e){setTimeout((()=>{var t;R.value.size||u.persistent||null!=e&&(!(null==(t=C.value)?void 0:t.contentEl)||y(e,C.value.contentEl))||(D.value=!1,null==M||M.closeParents())}),40)}}),a(D,(e=>{e?null==M||M.register():null==M||M.unregister()}),{immediate:!0});const S=t((()=>s({"aria-haspopup":"menu","aria-expanded":String(D.value),"aria-controls":x.value,onKeydown:L},u.activatorProps)));return E((()=>{const e=m.filterProps(u);return i(m,s({ref:C,id:x.value,class:["v-menu",u.class],style:u.style},e,{modelValue:D.value,"onUpdate:modelValue":e=>D.value=e,absolute:!0,activatorProps:S.value,location:u.location??(u.submenu?"end":"bottom"),"onClick:outside":T,onKeydown:I},V),{activator:k.activator,default:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return i(A,{root:"VMenu"},{default:()=>{var e;return[null==(e=k.default)?void 0:e.call(k,...t)]}})}})})),p({id:x,"Î¨openChildren":R},C)}});export{P as VMenu,h as makeVMenuProps};
