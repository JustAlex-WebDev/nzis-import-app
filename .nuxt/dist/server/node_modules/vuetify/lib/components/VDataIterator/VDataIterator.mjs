import{toRef as e,computed as t,createVNode as o}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{VFadeTransition as a}from"../transitions/index.mjs";import{provideExpanded as r,makeDataTableExpandProps as s}from"../VDataTable/composables/expand.mjs";import{provideGroupBy as l,useGroupedItems as m,makeDataTableGroupProps as p}from"../VDataTable/composables/group.mjs";import{useOptions as i}from"../VDataTable/composables/options.mjs";import{createPagination as n,providePagination as u,usePaginatedItems as d,makeDataTablePaginateProps as g}from"../VDataTable/composables/paginate.mjs";import{provideSelection as c,makeDataTableSelectProps as v}from"../VDataTable/composables/select.mjs";import{createSort as f,provideSort as P,useSortedItems as b,makeDataTableSortProps as j}from"../VDataTable/composables/sort.mjs";import{useDataIteratorItems as x,makeDataIteratorItemsProps as y}from"./composables/items.mjs";import{makeComponentProps as I}from"../../composables/component.mjs";import{useFilter as B,makeFilterProps as S}from"../../composables/filter.mjs";import{LoaderSlot as h}from"../../composables/loader.mjs";import{useProxiedModel as D}from"../../composables/proxiedModel.mjs";import{makeTagProps as V}from"../../composables/tag.mjs";import{makeTransitionProps as G,MaybeTransition as T}from"../../composables/transition.mjs";import{genericComponent as E}from"../../util/defineComponent.mjs";import{propsFactory as w}from"../../util/propsFactory.mjs";import{useRender as C}from"../../util/useRender.mjs";const O=w({search:String,loading:Boolean,...I(),...y(),...v(),...j(),...g({itemsPerPage:5}),...s(),...p(),...S(),...V(),...G({transition:{component:a,hideOnLeave:!0}})},"VDataIterator"),k=E()({name:"VDataIterator",props:O(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(a,s){let{slots:p}=s;const g=D(a,"groupBy"),v=e(a,"search"),{items:j}=x(a),{filteredItems:y}=B(a,j,v,{transform:e=>e.raw}),{sortBy:I,multiSort:S,mustSort:V}=f(a),{page:G,itemsPerPage:E}=n(a),{toggleSort:w}=P({sortBy:I,multiSort:S,mustSort:V,page:G}),{sortByWithGroups:O,opened:k,extractRows:A,isGroupOpen:L,toggleGroup:R}=l({groupBy:g,sortBy:I}),{sortedItems:z}=b(a,y,O,{transform:e=>e.raw}),{flatItems:F}=m(z,g,k),H=t((()=>F.value.length)),{startIndex:M,stopIndex:U,pageCount:W,prevPage:_,nextPage:q,setItemsPerPage:J,setPage:K}=u({page:G,itemsPerPage:E,itemsLength:H}),{paginatedItems:N}=d({items:F,startIndex:M,stopIndex:U,itemsPerPage:E}),Q=t((()=>A(N.value))),{isSelected:X,select:Y,selectAll:Z,toggleSelect:$}=c(a,{allItems:j,currentPage:Q}),{isExpanded:ee,toggleExpand:te}=r(a);i({page:G,itemsPerPage:E,sortBy:I,groupBy:g,search:v});const oe=t((()=>({page:G.value,itemsPerPage:E.value,sortBy:I.value,pageCount:W.value,toggleSort:w,prevPage:_,nextPage:q,setPage:K,setItemsPerPage:J,isSelected:X,select:Y,selectAll:Z,toggleSelect:$,isExpanded:ee,toggleExpand:te,isGroupOpen:L,toggleGroup:R,items:Q.value,groupedItems:N.value})));return C((()=>o(a.tag,{class:["v-data-iterator",{"v-data-iterator--loading":a.loading},a.class],style:a.style},{default:()=>{var e,t;return[null==(e=p.header)?void 0:e.call(p,oe.value),o(T,{transition:a.transition},{default:()=>{var e,t;return[a.loading?o(h,{key:"loader",name:"v-data-iterator",active:!0},{default:e=>{var t;return null==(t=p.loader)?void 0:t.call(p,e)}}):o("div",{key:"items"},[N.value.length?null==(t=p.default)?void 0:t.call(p,oe.value):null==(e=p["no-data"])?void 0:e.call(p)])]}}),null==(t=p.footer)?void 0:t.call(p,oe.value)]}}))),{}}});export{k as VDataIterator,O as makeVDataIteratorProps};
