import{useId as e,computed as l,createVNode as t,Fragment as a}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";import{makeLineProps as i}from"./util/line.mjs";import{propsFactory as n}from"../../util/propsFactory.mjs";import{genericComponent as r}from"../../util/defineComponent.mjs";import{getPropertyFromItem as u}from"../../util/helpers.mjs";import{useRender as o}from"../../util/useRender.mjs";const m=n({autoLineWidth:Boolean,...i()},"VBarline"),s=r()({name:"VBarline",props:m(),setup(i,n){let{slots:r}=n;const m=e(),s=l((()=>i.id||`barline-${m}`)),h=l((()=>Number(i.autoDrawDuration)||500)),p=l((()=>Boolean(i.showLabels||i.labels.length>0||!!(null==r?void 0:r.label)))),v=l((()=>parseFloat(i.lineWidth)||4)),d=l((()=>Math.max(i.modelValue.length*v.value,Number(i.width)))),c=l((()=>({minX:0,maxX:d.value,minY:0,maxY:parseInt(i.height,10)}))),g=l((()=>i.modelValue.map((e=>u(e,i.itemValue,e)))));function x(e,l){const{minX:t,maxX:a,minY:n,maxY:r}=l,u=e.length;let o=null!=i.max?Number(i.max):Math.max(...e),m=null!=i.min?Number(i.min):Math.min(...e);m>0&&null==i.min&&(m=0),o<0&&null==i.max&&(o=0);const s=a/u,h=(r-n)/(o-m||1),p=r-Math.abs(m*h);return e.map(((e,l)=>{const a=Math.abs(h*e);return{x:t+l*s,y:p-a+Number(e<0)*a,height:a,value:e}}))}const b=l((()=>{const e=[],l=x(g.value,c.value),t=l.length;for(let a=0;e.length<t;a++){const t=l[a];let n=i.labels[a];n||(n="object"==typeof t?t.value:t),e.push({x:t.x,value:String(n)})}return e})),f=l((()=>x(g.value,c.value))),y=l((()=>(Math.abs(f.value[0].x-f.value[1].x)-v.value)/2)),N=l((()=>"boolean"==typeof i.smooth?i.smooth?2:0:Number(i.smooth)));o((()=>{const e=i.gradient.slice().length?i.gradient.slice().reverse():[""];return t("svg",{display:"block"},[t("defs",null,[t("linearGradient",{id:s.value,gradientUnits:"userSpaceOnUse",x1:"left"===i.gradientDirection?"100%":"0",y1:"top"===i.gradientDirection?"100%":"0",x2:"right"===i.gradientDirection?"100%":"0",y2:"bottom"===i.gradientDirection?"100%":"0"},[e.map(((l,a)=>t("stop",{offset:a/Math.max(e.length-1,1),"stop-color":l||"currentColor"},null)))])]),t("clipPath",{id:`${s.value}-clip`},[f.value.map((e=>t("rect",{x:e.x+y.value,y:e.y,width:v.value,height:e.height,rx:N.value,ry:N.value},[i.autoDraw&&t(a,null,[t("animate",{attributeName:"y",from:e.y+e.height,to:e.y,dur:`${h.value}ms`,fill:"freeze"},null),t("animate",{attributeName:"height",from:"0",to:e.height,dur:`${h.value}ms`,fill:"freeze"},null)])])))]),p.value&&t("g",{key:"labels",style:{textAnchor:"middle",dominantBaseline:"mathematical",fill:"currentColor"}},[b.value.map(((e,l)=>{var a;return t("text",{x:e.x+y.value+v.value/2,y:parseInt(i.height,10)-2+(parseInt(i.labelSize,10)||5.25),"font-size":Number(i.labelSize)||7},[(null==(a=r.label)?void 0:a.call(r,{index:l,value:e.value}))??e.value])}))]),t("g",{"clip-path":`url(#${s.value}-clip)`,fill:`url(#${s.value})`},[t("rect",{x:0,y:0,width:Math.max(i.modelValue.length*v.value,Number(i.width)),height:i.height},null)])])}))}});export{s as VBarline,m as makeVBarlineProps};
