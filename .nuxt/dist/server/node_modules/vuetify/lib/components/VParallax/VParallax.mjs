import{ref as e,watchEffect as t,watch as o,computed as r,createVNode as l}from"/Users/alexandarvalov/Documents/GitHub/nzis-import-app/node_modules/vue/index.mjs";/* empty css              */import{makeComponentProps as s}from"../../composables/component.mjs";import{useIntersectionObserver as a}from"../../composables/intersectionObserver.mjs";import{useResizeObserver as n}from"../../composables/resizeObserver.mjs";import{useDisplay as i}from"../../composables/display.mjs";import{VImg as m}from"../VImg/VImg.mjs";import{genericComponent as c}from"../../util/defineComponent.mjs";import{propsFactory as u}from"../../util/propsFactory.mjs";import{getScrollParent as p}from"../../util/getScrollParent.mjs";import{clamp as v}from"../../util/helpers.mjs";import{useRender as f}from"../../util/useRender.mjs";const d=u({scale:{type:[Number,String],default:.5},...s()},"VParallax"),g=c()({name:"VParallax",props:d(),setup(s,c){let{slots:u}=c;const{intersectionRef:d,isIntersecting:g}=a(),{resizeRef:h,contentRect:j}=n(),{height:b}=i(),x=e();let y;t((()=>{var e;d.value=h.value=null==(e=x.value)?void 0:e.$el})),o(g,(e=>{e?(y=p(d.value),y=y===(void 0).scrollingElement?void 0:y,y.addEventListener("scroll",V,{passive:!0}),V()):y.removeEventListener("scroll",V)})),o(b,V),o((()=>{var e;return null==(e=j.value)?void 0:e.height}),V);const P=r((()=>1-v(Number(s.scale))));let R=-1;function V(){g.value&&(cancelAnimationFrame(R),R=requestAnimationFrame((()=>{var e;const t=(null==(e=x.value)?void 0:e.$el).querySelector(".v-img__img");if(!t)return;const o=y instanceof Document?(void 0).documentElement.clientHeight:y.clientHeight,r=y instanceof Document?(void 0).scrollY:y.scrollTop,l=d.value.getBoundingClientRect().top+r,s=j.value.height,a=(n=(r-(l+(s-o)/2))*P.value,Math.floor(Math.abs(n))*Math.sign(n));var n;const i=Math.max(1,(P.value*(o-s)+s)/s);t.style.setProperty("transform",`translateY(${a}px) scale(${i})`)})))}return f((()=>l(m,{class:["v-parallax",{"v-parallax--active":g.value},s.class],style:s.style,ref:x,cover:!0,onLoadstart:V,onLoad:V},u))),{}}});export{g as VParallax,d as makeVParallaxProps};
