import{Box as e}from"./box.mjs";function t(t){const i=t.getBoundingClientRect(),r=getComputedStyle(t),n=r.transform;if(n){let s,o,m,f,u;if(n.startsWith("matrix3d("))s=n.slice(9,-1).split(/, /),o=Number(s[0]),m=Number(s[5]),f=Number(s[12]),u=Number(s[13]);else{if(!n.startsWith("matrix("))return new e(i);s=n.slice(7,-1).split(/, /),o=Number(s[0]),m=Number(s[3]),f=Number(s[4]),u=Number(s[5])}const h=r.transformOrigin,a=i.x-f-(1-o)*parseFloat(h),l=i.y-u-(1-m)*parseFloat(h.slice(h.indexOf(" ")+1)),d=o?i.width/o:t.offsetWidth+1,c=m?i.height/m:t.offsetHeight+1;return new e({x:a,y:l,width:d,height:c})}return new e(i)}function i(e,t,i){if(void 0===e.animate)return{finished:Promise.resolve()};let r;try{r=e.animate(t,i)}catch(n){return{finished:Promise.resolve()}}return void 0===r.finished&&(r.finished=new Promise((e=>{r.onfinish=()=>{e(r)}}))),r}export{i as animate,t as nullifyTransforms};
