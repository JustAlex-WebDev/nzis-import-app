import{keys as t}from"../../util/helpers.mjs";function e(t,e){var n;const o=t.changedTouches[0];e.touchendX=o.clientX,e.touchendY=o.clientY,null==(n=e.end)||n.call(e,{originalEvent:t,...e}),(t=>{const{touchstartX:e,touchendX:n,touchstartY:o,touchendY:c}=t;t.offsetX=n-e,t.offsetY=c-o,Math.abs(t.offsetY)<.5*Math.abs(t.offsetX)&&(t.left&&n<e-16&&t.left(t),t.right&&n>e+16&&t.right(t)),Math.abs(t.offsetX)<.5*Math.abs(t.offsetY)&&(t.up&&c<o-16&&t.up(t),t.down&&c>o+16&&t.down(t))})(e)}const n={mounted:function(n,o){var c;const u=o.value,l=(null==u?void 0:u.parent)?n.parentElement:n,a=(null==u?void 0:u.options)??{passive:!0},s=null==(c=o.instance)?void 0:c.$.uid;if(!l||!s)return;const r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:t=>function(t,e){var n;const o=t.changedTouches[0];e.touchstartX=o.clientX,e.touchstartY=o.clientY,null==(n=e.start)||n.call(e,{originalEvent:t,...e})}(t,n),touchend:t=>e(t,n),touchmove:t=>function(t,e){var n;const o=t.changedTouches[0];e.touchmoveX=o.clientX,e.touchmoveY=o.clientY,null==(n=e.move)||n.call(e,{originalEvent:t,...e})}(t,n)}}(o.value);l._touchHandlers=l._touchHandlers??Object.create(null),l._touchHandlers[s]=r,t(r).forEach((t=>{l.addEventListener(t,r[t],a)}))},unmounted:function(e,n){var o,c;const u=(null==(o=n.value)?void 0:o.parent)?e.parentElement:e,l=null==(c=n.instance)?void 0:c.$.uid;if(!(null==u?void 0:u._touchHandlers)||!l)return;const a=u._touchHandlers[l];t(a).forEach((t=>{u.removeEventListener(t,a[t])})),delete u._touchHandlers[l]}};export{n as Touch,n as default};
