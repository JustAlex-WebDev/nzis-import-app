import{attachedRoot as e}from"../../util/dom.mjs";function t(){return!0}function o(t,o,i){if(!t||!1===n(t,i))return!1;const u=e(o);if("undefined"!=typeof ShadowRoot&&u instanceof ShadowRoot&&u.host===t.target)return!1;const s=("object"==typeof i.value&&i.value.include||(()=>[]))();return s.push(o),!s.some((e=>null==e?void 0:e.contains(t.target)))}function n(e,o){return("object"==typeof o.value&&o.value.closeConditional||t)(e)}function i(t,o){const n=e(t);o(void 0),"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&o(n)}const u={mounted(e,t){const u=i=>function(e,t,i){const u="function"==typeof i.value?i.value:i.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&o(e,t,i)&&setTimeout((()=>{n(e,i)&&u&&u(e)}),0)}(i,e,t),s=n=>{e._clickOutside.lastMousedownWasOutside=o(n,e,t)};i(e,(e=>{e.addEventListener("click",u,!0),e.addEventListener("mousedown",s,!0)})),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:u,onMousedown:s}},beforeUnmount(e,t){e._clickOutside&&(i(e,(o=>{var n;if(!o||!(null==(n=e._clickOutside)?void 0:n[t.instance.$.uid]))return;const{onClick:i,onMousedown:u}=e._clickOutside[t.instance.$.uid];o.removeEventListener("click",i,!0),o.removeEventListener("mousedown",u,!0)})),delete e._clickOutside[t.instance.$.uid])}};export{u as ClickOutside,u as default};
