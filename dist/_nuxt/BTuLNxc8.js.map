{"version":3,"file":"BTuLNxc8.js","sources":["../../../../pages/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\n//\n// State\n//\n\n// Form state\nconst form = reactive({\n  pid: null as number | null,\n  hph: null as string | null,\n  location: null as string | null,\n  saleSchema: null as string | null,\n});\n\n// Identifier Type Switch (true for PID, false for HPH)\nconst identifierType = ref<boolean>(true);\n\n// Form ref for validation\nconst formRef = ref();\n\n// Location list items\nconst locationItems = [\n  \"Асеновград\",\n  \"Търново\",\n  \"София\",\n  \"Пловдив\",\n  \"Плевен\",\n  \"Хасково\",\n];\n\n// Sale schema list items\nconst saleSchemaItems = [\"НЗОК - Асеновград\", \"НЗОК - Пловдив\", \"НЗОК - София\"];\n\n//\n// Methods\n//\n\n// Validation rule for PID\nconst pidValidationRule = (v: string) => {\n  const regex = /^\\d{10}$/;\n  if (!v) {\n    return \"ЕГН/ЛНЧ не може да бъде празно\";\n  } else if (!regex.test(v)) {\n    return \"ЕГН/ЛНЧ трябва да съдържа точно 10 цифри\";\n  }\n  return true;\n};\n\n// Validation rule for HPH\nconst hphValidationRule = (v: string) => {\n  const regex = /^[0-9А-Яа-я]{12}$/; // Ensure exactly 12 characters: numbers or Cyrillic letters\n  if (!v) {\n    return \"HPH не може да бъде празно\";\n  } else if (!regex.test(v)) {\n    return \"HPH трябва да съдържа точно 12 символа (цифри и/или букви на кирилица)\";\n  }\n  return true;\n};\n\n//\n// Methods\n//\n\n// Validate form fields\nconst validateForm = () => {\n  const pidValid = identifierType.value\n    ? pidValidationRule(form.pid?.toString() || \"\") === true\n    : hphValidationRule(form.hph?.toString() || \"\") === true;\n\n  if (!pidValid) {\n    console.error(\"Invalid PID/HPH\");\n  }\n\n  return pidValid;\n};\n\n// Handle form submission\nconst handleSubmit = () => {\n  if (validateForm()) {\n    console.log(\"Form submitted:\", {\n      ...form,\n      identifierType: identifierType.value ? \"PID\" : \"HPH\",\n    });\n  } else {\n    console.log(\"Form validation failed.\");\n  }\n};\n//\n// Computed\n//\n\n// Computed property for the counter\nconst counter = computed(() => {\n  // Convert to string and get length\n  const length = form.pid ? form.pid.toString().length : 0;\n  return length;\n});\n\n//\n// On component mount\n//\n\n// Set default location to the first item in the list when the component is mounted\nonMounted(() => {\n  form.location = form.location || locationItems[0];\n  form.saleSchema = form.saleSchema || saleSchemaItems[0];\n});\n\n//\n// Metadata\n//\n\n// Set the page's head metadata\nuseHead({\n  link: [{ rel: \"icon\", type: \"image/svg+xml\", href: \"\" }],\n  title: \"НЗИС Import Application\",\n  htmlAttrs: {\n    lang: \"bg\",\n  },\n  meta: [\n    {\n      name: \"description\",\n      content:\n        \"НЗИС Import Application е приложение за импортиране на данни за пациенти от Националната здравна информационна система (НЗИС), което позволява лесно извличане на данни и реферали за пациента.\",\n    },\n    {\n      name: \"keywords\",\n      content: \"НЗИС, пациентски данни, реферали, импортиране, здравеопазване\",\n    },\n    { name: \"author\", content: \"SKYWARE Group | LIMS iLab\" },\n    { name: \"viewport\", content: \"width=device-width, initial-scale=1\" },\n  ],\n});\n</script>\n\n<template>\n  <v-container\n    max-width=\"1024\"\n    height=\"100%\"\n    class=\"w-100 mx-auto d-flex flex-column ga-4 px-4 py-8\"\n  >\n    <!-- Actions -->\n    <div\n      class=\"d-flex flex-wrap flex-md-row flex-column-reverse align-start align-md-center justify-space-between ga-4\"\n    >\n      <!-- PID/HPH Switch -->\n      <div class=\"d-flex align-center ga-4\">\n        <span>Търсете направления по</span>\n        <v-switch\n          v-model=\"identifierType\"\n          :hide-details=\"true\"\n          color=\"primary\"\n          :label=\"identifierType ? 'ЕГН/ЛЧН' : 'HPH'\"\n        >\n          <template v-slot:label>\n            {{ identifierType ? \"ЕГН/ЛЧН\" : \"HPH\" }}\n          </template>\n        </v-switch>\n      </div>\n\n      <div class=\"d-flex align-center ga-4\">\n        <!-- Import -->\n        <v-btn\n          color=\"primary\"\n          rounded=\"lg\"\n          variant=\"outlined\"\n          prepend-icon=\"mdi-file-import-outline\"\n          class=\"d-flex\"\n          v-tooltip:bottom=\"{\n            text: 'Импортиране на маркираните направления',\n            openDelay: 700,\n          }\"\n        >\n          <span class=\"text-body-2\">Импорт</span>\n        </v-btn>\n\n        <!-- Print -->\n        <v-btn\n          color=\"\"\n          rounded=\"lg\"\n          variant=\"outlined\"\n          prepend-icon=\"mdi-printer-outline\"\n          class=\"d-flex\"\n          v-tooltip:bottom=\"{\n            text: 'Печатане на маркираните направления',\n            openDelay: 700,\n          }\"\n        >\n          <span class=\"text-body-2\">Печат</span>\n        </v-btn>\n\n        <!-- Clear All -->\n        <v-btn\n          color=\"error\"\n          rounded=\"lg\"\n          variant=\"outlined\"\n          prepend-icon=\"mdi-close\"\n          class=\"d-flex\"\n          v-tooltip:bottom=\"{\n            text: 'Изчистисване на всички направления',\n            openDelay: 700,\n          }\"\n        >\n          <span class=\"text-body-2\">Изчисти</span>\n        </v-btn>\n      </div>\n    </div>\n\n    <!-- Form -->\n    <v-form ref=\"formRef\" @submit.prevent=\"handleSubmit\">\n      <v-row class=\"d-flex flex-wrap\" align=\"stretch\" justify=\"space-between\">\n        <!-- PID/HPH Inputs -->\n        <v-col cols=\"12\">\n          <!-- PID Input -->\n          <v-number-input\n            v-if=\"identifierType\"\n            v-model=\"form.pid\"\n            :value=\"form.pid\"\n            label=\"ЕГН/ЛЧН\"\n            control-variant=\"hidden\"\n            maxlength=\"10\"\n            variant=\"outlined\"\n            placeholder=\"5303266698\"\n            density=\"comfortable\"\n            rounded=\"lg\"\n            hint=\"Въведете валиден ЕГН/ЛНЧ (само цифри)\"\n            persistent-hint\n            :rules=\"[pidValidationRule]\"\n            :counter=\"counter\"\n            @keydown.enter=\"handleSubmit\"\n          >\n            <!-- Search Action -->\n            <template v-slot:append-inner>\n              <v-tooltip>\n                <template v-slot:activator=\"{ props }\">\n                  <v-icon\n                    class=\"cursor-pointer\"\n                    v-bind=\"props\"\n                    @click=\"handleSubmit\"\n                  >\n                    mdi-magnify\n                  </v-icon>\n                </template>\n\n                <!-- Tooltip -->\n                <span>Търсене</span>\n              </v-tooltip>\n            </template>\n          </v-number-input>\n\n          <!-- HPH Input -->\n          <v-text-field\n            v-else\n            v-model=\"form.hph\"\n            :value=\"form.hph\"\n            label=\"HPH\"\n            type=\"text\"\n            maxlength=\"12\"\n            variant=\"outlined\"\n            placeholder=\"5АГ30326ПВ98\"\n            density=\"comfortable\"\n            rounded=\"lg\"\n            hint=\"Въведете валиден HPH\"\n            persistent-hint\n            :rules=\"[hphValidationRule]\"\n            :counter=\"counter\"\n            @keydown.enter=\"handleSubmit\"\n          >\n            <!-- Search Action -->\n            <template v-slot:append-inner>\n              <v-tooltip>\n                <template v-slot:activator=\"{ props }\">\n                  <v-icon\n                    class=\"cursor-pointer\"\n                    v-bind=\"props\"\n                    @click=\"handleSubmit\"\n                  >\n                    mdi-magnify\n                  </v-icon>\n                </template>\n\n                <!-- Tooltip -->\n                <span>Търсене</span>\n              </v-tooltip>\n            </template>\n          </v-text-field>\n        </v-col>\n\n        <!-- Sale Schema Select -->\n        <v-col cols=\"12\" md=\"6\">\n          <v-select\n            v-model=\"form.saleSchema\"\n            :value=\"form.saleSchema\"\n            :items=\"saleSchemaItems\"\n            prepend-inner-icon=\"mdi-currency-eur\"\n            label=\"Изберете схема на продажба\"\n            control-variant=\"hidden\"\n            maxlength=\"10\"\n            variant=\"outlined\"\n            placeholder=\"Схема на продажба\"\n            density=\"comfortable\"\n            rounded=\"lg\"\n            hint=\"Изберете схема на продажба от списъка.\"\n            persistent-hint\n          >\n          </v-select>\n        </v-col>\n\n        <!-- Location Select -->\n        <v-col cols=\"12\" md=\"6\">\n          <v-select\n            v-model=\"form.location\"\n            :value=\"form.location\"\n            :items=\"locationItems\"\n            prepend-inner-icon=\"mdi-map-marker-outline\"\n            label=\"Изберете местоположение\"\n            control-variant=\"hidden\"\n            maxlength=\"10\"\n            variant=\"outlined\"\n            placeholder=\"Местоположение\"\n            density=\"comfortable\"\n            rounded=\"lg\"\n            hint=\"Изберете местоположение от списъка.\"\n            persistent-hint\n          >\n          </v-select>\n        </v-col>\n      </v-row>\n    </v-form>\n  </v-container>\n</template>\n"],"names":["form","reactive","pid","hph","location","saleSchema","identifierType","ref","formRef","locationItems","saleSchemaItems","pidValidationRule","v","test","hphValidationRule","handleSubmit","pidValid","value","_a","toString","_b","console","error","validateForm","log","counter","computed","length","onMounted","useHead","link","rel","type","href","title","htmlAttrs","lang","meta","name","content"],"mappings":"0YAMA,MAAMA,EAAOC,EAAS,CACpBC,IAAK,KACLC,IAAK,KACLC,SAAU,KACVC,WAAY,OAIRC,EAAiBC,GAAa,GAG9BC,EAAUD,IAGVE,EAAgB,CACpB,aACA,UACA,QACA,UACA,SACA,WAIIC,EAAkB,CAAC,oBAAqB,iBAAkB,gBAO1DC,EAAqBC,GAEpBA,IADS,WAGIC,KAAKD,IACd,2CAFA,iCAQLE,EAAqBF,GAEpBA,IADS,oBAGIC,KAAKD,IACd,yEAFA,6BAyBLG,EAAe,KAbA,cACnB,MAAMC,EAAWV,EAAeW,OACsB,IAAlDN,GAAkB,OAAAO,EAAAlB,EAAKE,UAAK,EAAAgB,EAAAC,aAAc,KACQ,IAAlDL,GAAkB,OAAAM,EAAApB,EAAKG,UAAK,EAAAiB,EAAAD,aAAc,IAMvC,OAJFH,GACHK,QAAQC,MAAM,mBAGTN,CAAA,EAKHO,GACFF,QAAQG,IAAI,kBAAmB,IAC1BxB,EACHM,eAAgBA,EAAeW,MAAQ,MAAQ,QAGjDI,QAAQG,IAAI,0BAAyB,EAQnCC,EAAUC,GAAS,IAER1B,EAAKE,IAAMF,EAAKE,IAAIiB,WAAWQ,OAAS,WASzDC,GAAU,KACR5B,EAAKI,SAAWJ,EAAKI,UAAYK,EAAc,GAC/CT,EAAKK,WAAaL,EAAKK,YAAcK,EAAgB,EAAC,IAQhDmB,EAAA,CACNC,KAAM,CAAC,CAAEC,IAAK,OAAQC,KAAM,gBAAiBC,KAAM,KACnDC,MAAO,0BACPC,UAAW,CACTC,KAAM,MAERC,KAAM,CACJ,CACEC,KAAM,cACNC,QACE,mMAEJ,CACED,KAAM,WACNC,QAAS,iEAEX,CAAED,KAAM,SAAUC,QAAS,6BAC3B,CAAED,KAAM,WAAYC,QAAS"}