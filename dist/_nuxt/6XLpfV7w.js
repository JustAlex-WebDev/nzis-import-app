import{d as e,u as l,r as a,a as t,c as n,o,b as i,e as d,f as r,g as s,h as c,w as u,i as p,j as m,k as f,l as g,m as v,n as h,t as y,p as x,q as b,s as _,v as w,x as V,F as D,y as C,z as H,A as k}from"./CPynb-x8.js";const S=[{id:1,hph:"123456789012",patientName:"Иван Стойков Иванов",patientPid:"1234567890",issuedDate:"2025-04-09",referenceId:"25099A0000F6",referenceType:1,primaryLocation:"Пловдив",primaryLocationCode:16,secondaryLocation:"Съединение",secondaryLocationCode:15,patientStateCode:"ZOO",referringDoctor:"Тодор Николов",doctorId:1700003565,conditionCode:"06",conditionDescription:"Вътрешни болести",regionalHealthCode:"1622111277",executorName:"Д-р Иванов",materialCollectionDate:"2025-04-08",resultDate:"2025-04-10"},{id:2,hph:"123456789012",patientName:"Иван Стойков Иванов",patientPid:"1234567890",issuedDate:"2025-04-10",referenceId:"35088B0000F7",referenceType:2,primaryLocation:"София",primaryLocationCode:18,secondaryLocation:"Враждебна",secondaryLocationCode:17,patientStateCode:"XYZ",referringDoctor:"Д-р Анна Иванова",doctorId:1700007890,conditionCode:"07",conditionDescription:"Неврология",regionalHealthCode:"1633112288",executorName:"Д-р Петрова",materialCollectionDate:"2025-04-09",resultDate:"2025-04-12"}],L={class:"d-flex flex-wrap flex-md-row flex-column-reverse align-start align-md-center justify-space-between ga-4"},U={class:"d-flex align-center ga-4"},z={class:"d-flex align-center ga-4"},N={class:"d-flex align-center ga-1"},j={class:"text-subtitle-2"},P={class:"relative d-flex align-center"},I={class:"d-flex align-center font-weight-bold",style:{"text-wrap-mode":"nowrap"}},A=e({__name:"index",setup(e){const{smAndDown:A}=l(),F=a({pid:null,hph:null,location:null,saleSchema:null}),T=t(!0),$=t(),K=t(!1),Y=t([]),M=t([]),O=["Асеновград","Търново","София","Пловдив","Плевен","Хасково"],R=["НЗОК - Асеновград","НЗОК - Пловдив","НЗОК - София"],Z=[{name:"Д-р Иванов",department:"Кардиология"},{name:"Д-р Петрова",department:"Неврология"},{name:"Д-р Георгиев",department:"Ортопедия"},{name:"Д-р Стефанова",department:"Педиатрия"},{name:"Д-р Николов",department:"Офталмология"},{name:"Д-р Димитрова",department:"Хирургия"}],q=[{key:"code",title:"Код",align:"start"},{key:"examinationName",title:"Изследване",align:"start"}],B=[{code:"00-02A",examinationName:"Изследване на витамин D"}],E=n((()=>M.value.length>0)),G=n((()=>{var e;return(null==(e=F.pid)?void 0:e.toString().length)||0})),W=e=>e?!!/^\d{10}$/.test(e)||"ЕГН/ЛНЧ трябва да съдържа точно 10 цифри":"ЕГН/ЛНЧ не може да бъде празно",X=e=>e?!!/^[0-9А-Яа-я]{12}$/.test(e)||"HPH трябва да съдържа точно 12 символа (цифри и/или букви на кирилица)":"HPH не може да бъде празно",J=e=>{const l=new Date(e);return`${l.getDate().toString().padStart(2,"0")} ${["яну","фев","мар","апр","май","юни","юли","авг","сеп","окт","ное","дек"][l.getMonth()]} ${l.getFullYear()}г.`},Q=()=>{Y.value=[]},ee=async()=>{var e,l;!0===(T.value?W((null==(e=F.pid)?void 0:e.toString())||""):X((null==(l=F.hph)?void 0:l.toString())||""))?(K.value=!0,Y.value=await(async()=>new Promise((e=>{setTimeout((()=>e(S)),1e3)})))(),K.value=!1,0===Y.value.length&&console.log("No references found for the given identifier.")):console.log("Form validation failed.")},le=e=>({title:e.name,subtitle:e.department});return o((()=>{F.location=F.location||O[0],F.saleSchema=F.saleSchema||R[0]})),i({title:"НЗИС Import Application",htmlAttrs:{lang:"bg"},meta:[{name:"description",content:"Приложение за импортиране на данни от НЗИС."},{name:"keywords",content:"НЗИС, пациентски данни, реферали, импортиране"},{name:"author",content:"SKYWARE Group | LIMS iLab"},{name:"viewport",content:"width=device-width, initial-scale=1"}]}),(e,l)=>{const a=d("v-progress-circular"),t=d("v-overlay"),n=d("v-switch"),o=d("v-btn"),i=d("v-icon"),S=d("v-tooltip"),ae=d("v-number-input"),te=d("v-text-field"),ne=d("v-col"),oe=d("v-select"),ie=d("v-row"),de=d("v-form"),re=d("v-divider"),se=d("v-checkbox"),ce=d("v-card-title"),ue=d("v-hover"),pe=d("v-data-table"),me=d("v-date-input"),fe=d("v-card-text"),ge=d("v-card"),ve=d("v-container"),he=r("tooltip");return c(),s(ve,{"max-width":"1024",height:"100%",class:"w-100 mx-auto d-flex flex-column ga-4 px-4 py-8"},{default:u((()=>[p(t,{"model-value":g(K),"z-index":"50",color:"rgba(0, 0, 0, 0.5)",class:"align-center justify-center"},{default:u((()=>[p(a,{indeterminate:"",color:"white",size:"50"})])),_:1},8,["model-value"]),m("div",L,[m("div",U,[l[6]||(l[6]=m("span",null,"Търсете направления по",-1)),p(n,{modelValue:g(T),"onUpdate:modelValue":l[0]||(l[0]=e=>v(T)?T.value=e:null),"hide-details":!0,color:"primary",label:g(T)?"ЕГН/ЛЧН":"HPH"},{label:u((()=>[h(y(g(T)?"ЕГН/ЛЧН":"HPH"),1)])),_:1},8,["modelValue","label"])]),m("div",z,[x((c(),s(o,{disabled:!g(E),color:"primary",rounded:"lg",variant:"outlined","prepend-icon":"mdi-file-import-outline",class:"d-flex"},{default:u((()=>l[7]||(l[7]=[m("span",{class:"text-body-2"},"Импорт",-1)]))),_:1},8,["disabled"])),[[he,{text:"Импортиране на маркираните направления",openDelay:700},"bottom"]]),x((c(),s(o,{disabled:!g(E),color:"",rounded:"lg",variant:"outlined","prepend-icon":"mdi-printer-outline",class:"d-flex"},{default:u((()=>l[8]||(l[8]=[m("span",{class:"text-body-2"},"Печат",-1)]))),_:1},8,["disabled"])),[[he,{text:"Печатане на маркираните направления",openDelay:700},"bottom"]]),x((c(),s(o,{color:"error",rounded:"lg",variant:"outlined","prepend-icon":"mdi-close",class:"d-flex",onClick:Q},{default:u((()=>l[9]||(l[9]=[m("span",{class:"text-body-2"},"Изчисти",-1)]))),_:1})),[[he,{text:"Изчистисване на всички направления",openDelay:700},"bottom"]])])]),p(de,{ref_key:"formRef",ref:$,onSubmit:b(ee,["prevent"])},{default:u((()=>[p(ie,{class:"d-flex flex-wrap",align:"stretch",justify:"space-between"},{default:u((()=>[p(ne,{cols:"12"},{default:u((()=>[g(T)?(c(),s(ae,{key:0,modelValue:g(F).pid,"onUpdate:modelValue":l[1]||(l[1]=e=>g(F).pid=e),value:g(F).pid,label:"ЕГН/ЛЧН","control-variant":"hidden",maxlength:"10",variant:"outlined",placeholder:"5303266698",density:"comfortable",rounded:"lg",hint:"Въведете валиден ЕГН/ЛНЧ (само цифри)","persistent-hint":"",rules:[W],counter:g(G),onKeydown:_(ee,["enter"])},{"append-inner":u((()=>[p(S,null,{activator:u((({props:e})=>[p(i,w({class:"cursor-pointer"},e,{onClick:ee}),{default:u((()=>l[10]||(l[10]=[h(" mdi-magnify ")]))),_:2},1040)])),default:u((()=>[l[11]||(l[11]=m("span",null,"Търсене",-1))])),_:1})])),_:1},8,["modelValue","value","rules","counter"])):(c(),s(te,{key:1,modelValue:g(F).hph,"onUpdate:modelValue":l[2]||(l[2]=e=>g(F).hph=e),value:g(F).hph,label:"HPH",type:"text",maxlength:"12",variant:"outlined",placeholder:"5АГ30326ПВ98",density:"comfortable",rounded:"lg",hint:"Въведете валиден HPH (цифри и/или букви на кирилица)","persistent-hint":"",rules:[X],counter:g(G),onKeydown:_(ee,["enter"])},{"append-inner":u((()=>[p(S,null,{activator:u((({props:e})=>[p(i,w({class:"cursor-pointer"},e,{onClick:ee}),{default:u((()=>l[12]||(l[12]=[h(" mdi-magnify ")]))),_:2},1040)])),default:u((()=>[l[13]||(l[13]=m("span",null,"Търсене",-1))])),_:1})])),_:1},8,["modelValue","value","rules","counter"]))])),_:1}),p(ne,{cols:"12",md:"6"},{default:u((()=>[p(oe,{modelValue:g(F).saleSchema,"onUpdate:modelValue":l[3]||(l[3]=e=>g(F).saleSchema=e),value:g(F).saleSchema,items:R,"prepend-inner-icon":"mdi-currency-eur",label:"Изберете схема на продажба","control-variant":"hidden",maxlength:"10",variant:"outlined",placeholder:"Схема на продажба",density:"comfortable",rounded:"lg",hint:"Изберете схема на продажба от списъка.","persistent-hint":""},null,8,["modelValue","value"])])),_:1}),p(ne,{cols:"12",md:"6"},{default:u((()=>[p(oe,{modelValue:g(F).location,"onUpdate:modelValue":l[4]||(l[4]=e=>g(F).location=e),value:g(F).location,items:O,"prepend-inner-icon":"mdi-map-marker-outline",label:"Изберете местоположение","control-variant":"hidden",maxlength:"10",variant:"outlined",placeholder:"Местоположение",density:"comfortable",rounded:"lg",hint:"Изберете местоположение от списъка.","persistent-hint":""},null,8,["modelValue","value"])])),_:1})])),_:1})])),_:1},512),p(re,{class:"my-6"}),g(Y).length>0?(c(),s(ie,{key:0,align:"stretch",justify:"start",class:"flex-0-1"},{default:u((()=>[(c(!0),V(D,null,C(g(Y),(e=>(c(),s(ne,{key:e.id,cols:"12",sm:"6",style:{height:"fit-content"}},{default:u((()=>[p(ge,{class:"bg-white",rounded:"lg",flat:"",border:""},{default:u((()=>[p(ce,{class:"d-flex bg-grey-lighten-5 justify-space-between align-center px-2 py-0"},{default:u((()=>[x(p(se,{value:e.id,modelValue:g(M),"onUpdate:modelValue":l[5]||(l[5]=e=>v(M)?M.value=e:null),"hide-details":!0,style:{scale:"0.8"},color:"primary",tabindex:"0","aria-label":"Селектирайте направлението"},null,8,["value","modelValue"]),[[he,{text:"Селектирайте направлението",openDelay:700},"bottom"]]),m("div",N,[m("div",j,[m("b",null," HPH: "+y(e.hph),1)]),m("div",P,[x(p(o,{icon:"mdi-content-copy",size:"x-small",rounded:"circle",variant:"text",color:"",onClick:l=>{return a=e.hph,void navigator.clipboard.writeText(a).then((()=>console.log("Text copied to clipboard"))).catch((e=>{console.error("Failed to copy text:",e),alert("Unable to copy text.")}));var a},tabindex:"0","aria-label":"Кликнете, за да копирате в клипборда"},null,8,["onClick"]),[[he,{text:"Кликнете, за да копирате в клипборда",openDelay:700},"bottom"]])])]),x(p(o,{onClick:l=>(e=>{Y.value=Y.value.filter((l=>l!==e))})(e),icon:"mdi-close",color:"error",size:"small",variant:"text","aria-label":"Затворете направлението"},null,8,["onClick"]),[[he,{text:"Затворете направлението",openDelay:700},"bottom"]])])),_:2},1024),p(re),p(fe,{class:"px-4 py-2"},{default:u((()=>[p(ue,null,{default:u((({isHovering:l,props:a})=>[m("div",w({ref_for:!0},a,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":l}]}),[p(i,{icon:"mdi-account-outline",size:"small"}),m("b",null,y(e.patientName),1),m("div",null,y(e.patientPid),1)],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:a,props:t})=>[m("div",w({ref_for:!0},t,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":a}]}),[p(i,{icon:"mdi-calendar-month-outline",size:"small"}),m("div",null,[l[14]||(l[14]=h(" Изд. ")),m("b",null,y(J(e.issuedDate)),1)]),m("div",null,[l[15]||(l[15]=h(" (Амб. л-т ")),m("b",null,y(e.referenceId),1),l[16]||(l[16]=h(" ) "))]),m("div",null,[l[17]||(l[17]=h(" вид ")),m("b",null,y(e.referenceType),1)])],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:a,props:t})=>[m("div",w({ref_for:!0},t,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":a}]}),[p(i,{icon:"mdi-map-marker-outline",size:"small"}),m("div",null,[h(y(e.primaryLocation)+" ( ",1),m("b",null,y(e.primaryLocationCode),1),l[18]||(l[18]=h(" ) "))]),m("div",null,[h(y(e.secondaryLocation)+" ( ",1),m("b",null,y(e.secondaryLocationCode),1),l[19]||(l[19]=h(" ) "))])],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:l,props:a})=>[m("div",w({ref_for:!0},a,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":l}]}),[p(i,{icon:"mdi-clipboard-pulse-outline",size:"small"}),m("div",null,y(e.patientStateCode),1)],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:a,props:t})=>[m("div",w({ref_for:!0},t,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":a}]}),[p(i,{icon:"mdi-doctor",size:"small"}),m("b",null,y(e.referringDoctor),1),m("div",null,[l[20]||(l[20]=h(" УИН: ")),m("b",null,y(e.doctorId),1)])],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:l,props:a})=>[m("div",w({ref_for:!0},a,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":l}]}),[p(i,{icon:"mdi-stethoscope",size:"small"}),m("div",null,[m("b",null,y(e.conditionCode),1),h(" ("+y(e.conditionDescription)+") ",1)])],16)])),_:2},1024),p(ue,null,{default:u((({isHovering:a,props:t})=>[m("div",w({ref_for:!0},t,{class:["d-flex flex-wrap align-center ga-2 rounded pa-2",{"bg-grey-lighten-5":a}]}),[p(i,{icon:"mdi-hospital-building",size:"small"}),m("div",null,[l[21]||(l[21]=h(" РЗИ код: ")),m("b",null,y(e.regionalHealthCode),1)])],16)])),_:2},1024),p(pe,{headers:q,items:B,mobile:g(A),"disable-sort":!0,"hide-default-header":g(A),"hide-default-footer":"",density:"compact",class:"bg-white w-100 border my-2 rounded"},H({"item.code":u((({item:e})=>[m("div",{class:k(["d-flex align-center ga-0",g(A)?"justify-end":"justify-start"])},[m("span",null,y(e.code),1)],2)])),"item.examinationName":u((({item:e})=>[m("div",{class:k(["d-flex align-center ga-0",g(A)?"justify-end":"justify-start"])},[m("span",null,y(e.examinationName),1)],2)])),_:2},[C(q,(e=>({name:`header.${e.key}`,fn:u((()=>[m("div",I,[m("span",null,y(e.title),1)])]))})))]),1032,["mobile","hide-default-header"]),p(oe,{"item-props":le,items:Z,"item-value":"name","item-text":"name",modelValue:e.executorName,"onUpdate:modelValue":l=>e.executorName=l,"prepend-inner-icon":"mdi-hospital-box-outline",label:"Изпълнител на направлението","control-variant":"hidden",variant:"outlined",placeholder:"Изпълнител на направлението",density:"compact","hide-details":!0,rounded:"lg",class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),p(me,{modelValue:e.materialCollectionDate,"onUpdate:modelValue":l=>e.materialCollectionDate=l,"prepend-icon":"","prepend-inner-icon":"mdi-test-tube",label:"Дата на материал",variant:"outlined",density:"compact",rounded:"lg","hide-details":!0,class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),p(me,{modelValue:e.resultDate,"onUpdate:modelValue":l=>e.resultDate=l,"prepend-icon":"","prepend-inner-icon":"mdi-file-document-arrow-right-outline",label:"Дата на резултат",variant:"outlined",density:"compact",rounded:"lg","hide-details":!0,class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):f("",!0)])),_:1})}}});export{A as default};
//# sourceMappingURL=6XLpfV7w.js.map
